<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Project_JSP.dao.RoomDao">
    
    <resultMap type="Room" id="RoomResult">
        <id property="roomNum" column="room_num"/>
        <result property="roomInfoNum.roomInfoNum" column="room_info_num"/>
        <result property="roomPrice" column="room_price"/>

    </resultMap>
   
    <sql id="selectSql">
        select room_num, room_info_num, room_price from room
    </sql>
    
    <sql id="whereSql">
        <where>
            <if test="roomNum != null">
                room_num = #{roomNum}
            </if>            
        </where>        
    </sql>
    
	<select id="selectRoom" resultMap="RoomResult">
	    <include refid="selectSql"/>	    
	</select>
	
	<select id="selectRoomByNum" parameterType="Room" resultMap="RoomResult">
	    <include refid="selectSql"/>
	    <include refid="whereSql"/>	    
	</select>
	
	<insert id="insertRoom" parameterType="Room">
	   insert into room(room_info_num, room_price) 
	   values(#{roomInfoNum.roomInfoNum}, #{roomPrice})
	</insert>
	
	<update id="updateRoom" parameterType="Room">
	    update room set room_info_num = #{roomInfoNum.roomInfoNum}, room_price = #{roomPrice}
	    <include refid="whereSql"/>
	</update>
	
	<delete id="deleteRoom" parameterType="Room">
	    delete from room
	    <include refid="whereSql"/>
	</delete>
    
</mapper>