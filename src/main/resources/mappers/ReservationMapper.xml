<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Project_JSP.dao.ReservationDao">
    
    <resultMap type="Reservation" id="ReservationResult">
        <result property="reservationNum" column="reservation_num"/>
        <result property="roomNum" column="room_num"/>
        <result property="total_price" column="total_price"/>
        <result property="checkIn" column="check_in"/>
        <result property="checkOut" column="check_out"/>
        <result property="personnel" column="personnel"/>
        <result property="state" column="reservation_state"/>
        <result property="clientNum" column="client_num"/>
        <result property="optionPrice" column="option_total_price"/>
        <result property="payDate" column="pay_date"/>
      
    </resultMap>
   
    <sql id="selectReservationSql">
        select * from reservation
    </sql>
    
    <sql id="whereSql">
        <where>
            <if test="reservationNum != null">
                reservation_num = ${reservationNum}
            </if>            
        </where>        
    </sql>
    
	<select id="selectReservation" resultMap="ReservationResult">
	    <include refid="selectReservationSql"/>	    
	</select>
	
	<select id="selectReservationNum" parameterType="Reservation" resultMap="ReservationResult">
	    <include refid="selectReservationSql"/>
	    <include refid="whereSql"/>	    
	</select>
	
	<insert id="insertClient" parameterType="Client">
	   insert into client(id,password,korean_name,english_name,birth,email,phone,home,address,client_grade) values(#{id}, #{pw},#{nameKo}, #{nameEn},#{birth}, #{email},#{phone}, #{home},#{address}, #{clientGrade})
	</insert>
	
	<update id="updateClient" parameterType="Client">
	    update client set id=#{id},password=#{pw},korean_name=#{nameKo},english_name=#{nameEn},birth=#{birth},email=#{email},phone=#{phone},home=#{home},address=#{address},client_grade=#{clientGrade} where client_num = #{clientNum}
	</update>
	 
	<delete id="deleteClient" parameterType="Client">
	    delete from client where client_num = #{clientNum}
	</delete> 
    
</mapper>